document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".todo__dialog"),t=JSON.parse(localStorage.getItem("tasks"))||[],o=document.querySelector(".todo__list"),n=document.querySelector(".todo__add-task"),d=document.querySelector(".todo__dialog-form"),a=document.querySelector(".todo__dialog-close"),s=document.querySelector(".todo__delete-all"),r=document.querySelector(".todo__date-day"),i=document.querySelector(".todo__date-date"),c=document.querySelector(".todo__date-month"),l=document.querySelector(".todo__date-year"),g=["January","February","March","April","May","June","July","August","September","October","November","December"],u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function _(e=[],t){t.innerHTML=e.map((e,t)=>`\n            <li class="todo__list-item ${e.done?"todo__list-item--done":""}" data-index="${t}">\n              ${e.text}\n              <svg class="todo__list-item-svg" data-index="${t}" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 59 59" style="enable-background:new 0 0 59 59;" xml:space="preserve">\n                <g><path d="M29.5,51c0.552,0,1-0.447,1-1V17c0-0.553-0.448-1-1-1s-1,0.447-1,1v33C28.5,50.553,28.948,51,29.5,51z"/>\n                <path d="M19.5,51c0.552,0,1-0.447,1-1V17c0-0.553-0.448-1-1-1s-1,0.447-1,1v33C18.5,50.553,18.948,51,19.5,51z"/>\n                <path d="M39.5,51c0.552,0,1-0.447,1-1V17c0-0.553-0.448-1-1-1s-1,0.447-1,1v33C38.5,50.553,38.948,51,39.5,51z"/>\n                <path d="M52.5,6H38.456c-0.11-1.25-0.495-3.358-1.813-4.711C35.809,0.434,34.751,0,33.499,0H23.5c-1.252,0-2.31,0.434-3.144,1.289 C19.038,2.642,18.653,4.75,18.543,6H6.5c-0.552,0-1,0.447-1,1s0.448,1,1,1h2.041l1.915,46.021C10.493,55.743,11.565,59,15.364,59 h28.272c3.799,0,4.871-3.257,4.907-4.958L50.459,8H52.5c0.552,0,1-0.447,1-1S53.052,6,52.5,6z M21.792,2.681 C22.24,2.223,22.799,2,23.5,2h9.999c0.701,0,1.26,0.223,1.708,0.681c0.805,0.823,1.128,2.271,1.24,3.319H20.553 C20.665,4.952,20.988,3.504,21.792,2.681z M46.544,53.979C46.538,54.288,46.4,57,43.636,57H15.364 c-2.734,0-2.898-2.717-2.909-3.042L10.542,8h37.915L46.544,53.979z"/>\n                </g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>\n              </svg>\n            </li>\n          `).join(""),m()}function m(){""===o.innerHTML?(o.classList.add("todo__list--empty"),s.classList.add("todo__delete-all--hidden")):(o.classList.remove("todo__list--empty"),s.classList.remove("todo__delete-all--hidden"))}!function(){let e=new Date;i.innerText=e.getDate(),r.innerText=u[e.getDay()],c.innerText=g[e.getMonth()],l.innerText=e.getFullYear()}(),_(t,o),n.addEventListener("click",()=>{e.showModal()}),d.addEventListener("submit",function(n){n.preventDefault();const d={text:this.querySelector(".todo__dialog-input").value,done:!1};if(!d.text)return!1;t.push(d),_(t,o),m(),localStorage.setItem("tasks",JSON.stringify(t)),this.reset(),e.close()}),e.addEventListener("keyup",e=>{13===e.key&&e.preventDefault()}),a.addEventListener("click",function(t){t.target.matches(".todo__dialog-close")&&e.close()}),o.addEventListener("click",function(e){if(!e.target.matches(".todo__list-item"))return;const n=e.target.dataset.index;t[n].done=!t[n].done,localStorage.setItem("tasks",JSON.stringify(t)),_(t,o)}),o.addEventListener("click",function(e){if(!e.target.matches(".todo__list-item-svg"))return;const n=e.target.dataset.index;window.confirm("Are you sure you want to delete this task?")&&(t.splice(n,1),localStorage.setItem("tasks",JSON.stringify(t)),_(t,o))}),s.addEventListener("click",function(){window.confirm("Are you sure you want to delete the list?")&&(localStorage.removeItem("tasks"),location.reload())})});